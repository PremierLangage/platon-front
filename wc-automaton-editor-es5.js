!function(){function t(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"8HpP":function(n,o,r){"use strict";r.r(o),r.d(o,"AutomatonEditorModule",(function(){return Y}));var s,c,u,l,f,h,d,m,v,p=r("vOrQ"),b=r("hCLc"),g=r("ydE+"),y=r("WYJo"),k=r("6Jna"),S=r("QXAp"),C=r("D57K"),j=r("A2ki"),x=r("hlYy"),E=r("JS64"),w=new p.InjectionToken("AUTOMATON_EDITOR_ACTIONS"),O=r("Vgaj"),I=r("Gvy/"),T=((s=function(){function n(){i(this,n),this.createStateEvent=new O.Subject,this.createTransitionEvent=new O.Subject,this.createInitialStateEvent=new O.Subject,this.createAcceptingStateEvent=new O.Subject,this.removeStateEvent=new O.Subject,this.removeTransitionEvent=new O.Subject,this.removeInitialStateEvent=new O.Subject,this.removeAcceptingStateEvent=new O.Subject,this.renameStateEvent=new O.Subject,this.renameTransitionEvent=new O.Subject}return a(n,[{key:"sync",value:function(t){this.state=t,this.validate()}},{key:"findPosition",value:function(t){return this.position[t]}},{key:"forEachState",value:function(t){this.states.forEach(t)}},{key:"forEachTransition",value:function(t){this.transitions.forEach(t)}},{key:"stateName",value:function(){return"S"+(this.states.length+1)}},{key:"isState",value:function(t){return null!=this.states.find((function(e){return e===t}))}},{key:"isInitial",value:function(t){return this.isState(t)&&null!=this.initialStates.find((function(e){return e===t}))}},{key:"isAccepting",value:function(t){return this.isState(t)&&null!=this.acceptingStates.find((function(e){return e===t}))}},{key:"addState",value:function(t,e,n){return!this.isState(t)&&(this.states.push(t),this.moveState(t,e,n),this.initialStates.length||this.addInitial(t),this.createStateEvent.next(t),!0)}},{key:"moveState",value:function(t,e,n){this.position[t]={x:e,y:n}}},{key:"addInitial",value:function(t){return!this.isInitial(t)&&(this.initialStates.push(t),this.createInitialStateEvent.next(t),!0)}},{key:"addAccepting",value:function(t){return!!this.isState(t)&&!this.isAccepting(t)&&(this.acceptingStates.push(t),this.createAcceptingStateEvent.next(t),!0)}},{key:"removeState",value:function(t){return!!this.remove(this.states,(function(e){return e===t}))&&(delete this.position[t],this.removeInitial(t),this.removeAccepting(t),this.remove(this.transitions,(function(e){return e.fromState===t||e.toState===t})),this.validate(),this.removeStateEvent.next(t),!0)}},{key:"removeInitial",value:function(t){return!!this.remove(this.initialStates,(function(e){return e===t}))&&(this.removeInitialStateEvent.next(t),!0)}},{key:"removeAccepting",value:function(t){return!!this.remove(this.acceptingStates,(function(e){return e===t}))&&(this.removeAcceptingStateEvent.next(t),!0)}},{key:"renameState",value:function(e,n){return!!this.isState(e)&&(this.states=[n].concat(t(this.states.filter((function(t){return t!==e})))),this.initialStates=this.initialStates.map((function(t){return t===e?n:t})),this.acceptingStates=this.acceptingStates.map((function(t){return t===e?n:t})),this.automaton.transitions.forEach((function(t){t.fromState===e&&(t.fromState=n),t.toState===e&&(t.toState=n)})),this.position[n]=this.position[e],delete this.position[e],this.validate(),this.renameStateEvent.next({oldName:e,newName:n}),!0)}},{key:"isTransition",value:function(t){return this.transitions.find((function(e){return e.fromState===t.fromState&&e.toState===t.toState}))}},{key:"addTransition",value:function(t){return!this.isTransition(t)&&(this.transitions.push(t),this.validate(),this.createTransitionEvent.next(t),!0)}},{key:"removeTransition",value:function(t){return!!this.remove(this.transitions,(function(e){return e.fromState===t.fromState&&e.toState===t.toState}))&&(this.validate(),this.removeTransitionEvent.next(t),!0)}},{key:"renameTransition",value:function(e,n){var i=this.transitions.find((function(t){return t.fromState===e.fromState&&t.toState===e.toState}));return!!i&&(i.symbols=t(n),this.validate(),this.renameTransitionEvent.next(i),!0)}},{key:"findTransition",value:function(t){return this.transitions.find(t)}},{key:"validate",value:function(){var t=[];this.transitions.forEach((function(e){e.symbols.forEach((function(e){t.includes(e)||t.push(e)}))})),this.alphabet=t}},{key:"remove",value:function(t,n){var i,o=0,a=function(t,n){var i;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=e(t))||n&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return s=t.done,t},e:function(t){c=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(c)throw r}}}}(t);try{for(a.s();!(i=a.n()).done;){if(n(i.value))return t.splice(o,1),!0;o++}}catch(r){a.e(r)}finally{a.f()}return!1}},{key:"onCreateState",get:function(){return this.createStateEvent.asObservable()}},{key:"onCreateTransition",get:function(){return this.createTransitionEvent.asObservable()}},{key:"onCreateInitialState",get:function(){return this.createInitialStateEvent.asObservable()}},{key:"onCreateAcceptingState",get:function(){return this.createAcceptingStateEvent.asObservable()}},{key:"onRemoveState",get:function(){return this.removeStateEvent.asObservable()}},{key:"onRemoveTransition",get:function(){return this.removeTransitionEvent.asObservable()}},{key:"onRemoveInitialState",get:function(){return this.removeInitialStateEvent.asObservable()}},{key:"onRemoveAcceptingState",get:function(){return this.removeAcceptingStateEvent.asObservable()}},{key:"onRenameState",get:function(){return this.renameStateEvent.asObservable()}},{key:"onRenameTransition",get:function(){return this.renameTransitionEvent.asObservable()}},{key:"automaton",get:function(){try{"string"==typeof this.state.automaton?this.state.automaton=Object(I.a)(this.state.automaton):this.state.automaton||(this.state.automaton=Object(I.c)())}catch(e){console.log(e),this.state.automaton=Object(I.c)()}var t=this.state.automaton;return t.position||(t.position={}),t.states||(t.states=[]),t.initialStates||(t.initialStates=[]),t.acceptingStates||(t.acceptingStates=[]),t.alphabet||(t.alphabet=[]),t.transitions||(t.transitions=[]),t},set:function(t){this.state.automaton=t}},{key:"alphabet",get:function(){return this.automaton.alphabet},set:function(t){this.automaton.alphabet=t}},{key:"states",get:function(){return this.automaton.states},set:function(t){this.automaton.states=t}},{key:"position",get:function(){return this.automaton.position||(this.automaton.position={}),this.automaton.position},set:function(t){this.automaton.position=t}},{key:"transitions",get:function(){return this.automaton.transitions},set:function(t){this.automaton.transitions=t}},{key:"initialStates",get:function(){return this.automaton.initialStates},set:function(t){this.automaton.initialStates=t}},{key:"acceptingStates",get:function(){return this.automaton.acceptingStates},set:function(t){this.automaton.acceptingStates=t}}]),n}()).\u0275fac=function(t){return new(t||s)},s.\u0275prov=p["\u0275\u0275defineInjectable"]({token:s,factory:s.\u0275fac}),s),P={provide:w,multi:!0,useClass:(v=function(){function t(e){i(this,t),this.editor=e,this.name="Supprimer"}return a(t,[{key:"run",value:function(t){t.state&&this.editor.removeState(t.state)}},{key:"condition",value:function(t){return!!t.state}}]),t}(),v.\u0275fac=function(t){return new(t||v)(p["\u0275\u0275inject"](T))},v.\u0275prov=p["\u0275\u0275defineInjectable"]({token:v,factory:v.\u0275fac}),v)},A={provide:w,multi:!0,useClass:(m=function(){function t(e,n){i(this,t),this.dialog=e,this.editor=n,this.name="Renommer"}return a(t,[{key:"run",value:function(t){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.state){e.next=2;break}return e.abrupt("return");case 2:return n=t.state,e.next=5,this.prompt("Renommer l'\xe9tat \u201c".concat(n,"\u201d"),"Nouveau nom",n);case 5:if(!(i=e.sent)||!i.trim()){e.next=10;break}if(i=i.trim(),!this.editor.isState(i)){e.next=9;break}return e.abrupt("return",void this.dialog.snack("Il existe d\xe9j\xe0 un \xe9tat avec ce nom !",{verticalPosition:"top",horizontalPosition:"end"}));case 9:this.editor.renameState(n,i);case 10:case"end":return e.stop()}}),e,this)})))}},{key:"condition",value:function(t){return!!t.state}},{key:"prompt",value:function(t,e,n){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.dialog.promptAsync({title:t,okTitle:"Valider",noTitle:"Annuler",fields:[{type:"text",placeholder:e,value:n,required:!0}]});case 2:return o=i.sent,i.abrupt("return",o?o.fields[0].value:"");case 4:case"end":return i.stop()}}),i,this)})))}}]),t}(),m.\u0275fac=function(t){return new(t||m)(p["\u0275\u0275inject"](k.a),p["\u0275\u0275inject"](T))},m.\u0275prov=p["\u0275\u0275defineInjectable"]({token:m,factory:m.\u0275fac}),m)},_={provide:w,multi:!0,useClass:(d=function(){function t(e){i(this,t),this.editor=e,this.name="Final"}return a(t,[{key:"run",value:function(t){t.state&&this.editor.addAccepting(t.state)}},{key:"condition",value:function(t){return!!t.state&&!this.editor.isAccepting(t.state)}}]),t}(),d.\u0275fac=function(t){return new(t||d)(p["\u0275\u0275inject"](T))},d.\u0275prov=p["\u0275\u0275defineInjectable"]({token:d,factory:d.\u0275fac}),d)},M={provide:w,multi:!0,useClass:(h=function(){function t(e){i(this,t),this.editor=e,this.name="Inital"}return a(t,[{key:"run",value:function(t){t.state&&this.editor.addInitial(t.state)}},{key:"condition",value:function(t){return!!t.state&&!this.editor.isInitial(t.state)}}]),t}(),h.\u0275fac=function(t){return new(t||h)(p["\u0275\u0275inject"](T))},h.\u0275prov=p["\u0275\u0275defineInjectable"]({token:h,factory:h.\u0275fac}),h)},z={provide:w,multi:!0,useClass:(f=function(){function t(e){i(this,t),this.editor=e,this.name="Non final"}return a(t,[{key:"run",value:function(t){t.state&&this.editor.removeAccepting(t.state)}},{key:"condition",value:function(t){return!!t.state&&this.editor.isAccepting(t.state)}}]),t}(),f.\u0275fac=function(t){return new(t||f)(p["\u0275\u0275inject"](T))},f.\u0275prov=p["\u0275\u0275defineInjectable"]({token:f,factory:f.\u0275fac}),f)},L={provide:w,multi:!0,useClass:(l=function(){function t(e){i(this,t),this.editor=e,this.name="Non initial"}return a(t,[{key:"run",value:function(t){t.state&&this.editor.removeInitial(t.state)}},{key:"condition",value:function(t){return!!t.state&&this.editor.isInitial(t.state)}}]),t}(),l.\u0275fac=function(t){return new(t||l)(p["\u0275\u0275inject"](T))},l.\u0275prov=p["\u0275\u0275defineInjectable"]({token:l,factory:l.\u0275fac}),l)},R={provide:w,multi:!0,useClass:(u=function(){function t(e){i(this,t),this.editor=e,this.name="Supprimer transition"}return a(t,[{key:"run",value:function(t){t.transition&&this.editor.removeTransition(t.transition)}},{key:"condition",value:function(t){return!!t.transition}}]),t}(),u.\u0275fac=function(t){return new(t||u)(p["\u0275\u0275inject"](T))},u.\u0275prov=p["\u0275\u0275defineInjectable"]({token:u,factory:u.\u0275fac}),u)},D={provide:w,multi:!0,useClass:(c=function(){function t(e,n){i(this,t),this.dialog=e,this.editor=n,this.name="Changer \xe9tiquette"}return a(t,[{key:"run",value:function(t){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.transition){e.next=2;break}return e.abrupt("return");case 2:return n=t.transition,e.next=5,this.prompt("Transition","Entrez les symboles en les s\xe9parant par une virgule",n.symbols.join(","));case 5:(i=e.sent)&&(0===(o=i.split(",").map((function(t){return t.trim()})).filter((function(t){return!!t}))).length?this.dialog.snack("Vous devez saisir les symboles en les s\xe9parant par une virgule",{verticalPosition:"top",horizontalPosition:"end"}):this.editor.renameTransition(n,o));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"condition",value:function(t){return!!t.transition}},{key:"prompt",value:function(t,e,n){return Object(C.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.dialog.promptAsync({title:t,okTitle:"Valider",noTitle:"Annuler",fields:[{type:"text",placeholder:e,value:n,required:!0}]});case 2:return o=i.sent,i.abrupt("return",o?o.fields[0].value:"");case 4:case"end":return i.stop()}}),i,this)})))}}]),t}(),c.\u0275fac=function(t){return new(t||c)(p["\u0275\u0275inject"](k.a),p["\u0275\u0275inject"](T))},c.\u0275prov=p["\u0275\u0275defineInjectable"]({token:c,factory:c.\u0275fac}),c)},N=r("O5Sd"),F=r("0S4P"),H=r("hPIy"),q=["container"];function V(t,e){if(1&t){var n=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275elementStart"](1,"button",8),p["\u0275\u0275listener"]("click",(function(){p["\u0275\u0275restoreView"](n);var t=e.$implicit;return p["\u0275\u0275nextContext"]().run(t)})),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementContainerEnd"]()}if(2&t){var i=e.$implicit;p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",i.name," ")}}var W,J,Q=((J=function(){function t(e,n,o,a){i(this,t),this.injector=e,this.editor=n,this.changeDetector=o,this.editorActions=a,this.subs=[],this.context={state:void 0,transition:void 0},this.zoom=1,this.actions=[]}return a(t,[{key:"ngOnInit",value:function(){var t=this;return this.jsp=j.jsPlumb.getInstance({Endpoint:["Dot",{radius:2}],Connector:"StateMachine",HoverPaintStyle:{stroke:"#1e8151",strokeWidth:2},ConnectionOverlays:[["Arrow",{location:1,id:"arrow",length:14,foldback:.8}],["Label",{label:"transition",id:"transition",cssClass:"automaton-transition"}]],Container:this.canvas}),this.jsp.registerConnectionType("basic",{anchor:"Continuous",connector:"StateMachine"}),new Promise((function(e){t.jsp.ready((function(){t.addListeners(),e()}))}))}},{key:"ngOnDestroy",value:function(){this.removeListeners()}},{key:"onChangeState",value:function(){var t=this;this.editor.sync(this.state),this.jsp.reset(!0),this.jsp.getContainer().innerHTML="",this.jsp.batch((function(){t.editor.forEachState(t.renderEndpoint.bind(t)),t.editor.forEachTransition(t.renderConnection.bind(t))})),this.unfocus()}},{key:"run",value:function(t){var e=this;this.changeDetector.ignore(this,(function(){return t.run(e.context)}))}},{key:"zoomIn",value:function(t){t.preventDefault(),t.stopPropagation(),this.zoom+=.1,this.zoom>=1&&(this.zoom=1),this.setZoom(this.zoom)}},{key:"zoomOut",value:function(t){t.preventDefault(),t.stopPropagation(),this.zoom-=.1,this.zoom<=.2&&(this.zoom=.2),this.setZoom(this.zoom)}},{key:"addListeners",value:function(){var t=this;this.jsp.bind("click",this.onClickConnection.bind(this)),this.jsp.bind("beforeDrop",this.onWillCreateConnection.bind(this)),j.jsPlumb.on(this.container.nativeElement,"click",this.onClickContainer.bind(this)),j.jsPlumb.on(this.container.nativeElement,"dblclick",this.onDblClickContainer.bind(this)),this.subs.push(this.editor.onCreateState.subscribe(this.renderEndpoint.bind(this))),this.subs.push(this.editor.onCreateTransition.subscribe(this.renderConnection.bind(this))),this.subs.push(this.editor.onCreateInitialState.subscribe((function(e){var n=t.findEndpoint(e);n&&(n.classList.remove("automaton-state--initial"),n.classList.add("automaton-state--initial"),t.focus(n))}))),this.subs.push(this.editor.onCreateAcceptingState.subscribe((function(e){var n=t.findEndpoint(e);n&&(n.classList.remove("automaton-state--final"),n.classList.add("automaton-state--final"),t.focus(n))}))),this.subs.push(this.editor.onRemoveInitialState.subscribe((function(e){var n=t.findEndpoint(e);n&&(n.classList.remove("automaton-state--initial"),t.focus(n))}))),this.subs.push(this.editor.onRemoveAcceptingState.subscribe((function(e){var n=t.findEndpoint(e);n&&(n.classList.remove("automaton-state--final"),t.focus(n))}))),this.subs.push(this.editor.onRemoveState.subscribe((function(e){t.jsp.remove(e),t.unfocus()}))),this.subs.push(this.editor.onRemoveTransition.subscribe((function(e){t.jsp.deleteConnection(t.findConnection(e)),t.unfocus()}))),this.subs.push(this.editor.onRenameState.subscribe((function(e){var n=e.oldName,i=e.newName,o=t.findEndpoint(e.oldName);if(o){o.id=i;var a=o.querySelector(".automaton-state__label");a&&(a.innerHTML=i),t.jsp.setIdChanged(n,i),t.focus(o)}}))),this.subs.push(this.editor.onRenameTransition.subscribe((function(e){var n=t.findConnection(e);n&&(n.getOverlay("transition").setLabel(e.symbols.join(",")),t.focus(n))})))}},{key:"removeListeners",value:function(){var t;null===(t=this.jsp)||void 0===t||t.reset(),null==j.jsPlumb||j.jsPlumb.off(this.container.nativeElement,"mousedown",this.onClickContainer.bind(this)),null==j.jsPlumb||j.jsPlumb.off(this.container.nativeElement,"dblclick",this.onDblClickContainer.bind(this)),this.subs.forEach((function(t){return t.unsubscribe()}))}},{key:"renderEndpoint",value:function(t){var e=this,n=document.createElement("div");n.id=t,n.className="automaton-state",n.innerHTML='\n        <div class="automaton-state__label">'.concat(t,'</div>\n        <div class="automaton-state__endpoint"></div>\n        ');var i=this.editor.findPosition(t),o=i.x,a=i.y;n.style.left=o+"px",n.style.top=a+"px",n.onclick=n.ontouchstart=function(){e.changeDetector.ignore(e,(function(){return e.focus(n)}))},this.editor.isInitial(t)&&n.classList.add("automaton-state--initial"),this.editor.isAccepting(t)&&n.classList.add("automaton-state--final"),this.jsp.getContainer().appendChild(n),this.jsp.draggable(n,{drag:function(t){e.changeDetector.ignore(e,(function(){e.editor.moveState(n.id,t.pos[0],t.pos[1])}))}}),this.jsp.makeSource(n,{filter:".automaton-state__endpoint",anchor:"Continuous",connectorStyle:{stroke:"#5c96bc",strokeWidth:2,outlineStroke:"transparent",outlineWidth:4},connectionType:"basic",maxConnections:-1}),this.jsp.makeTarget(n,{anchor:"Continuous",dropOptions:{hoverClass:"dragHover"},allowLoopback:!0})}},{key:"createEndpoint",value:function(t,e,n){e=null!=e?e:Math.random()*this.container.nativeElement.offsetWidth,n=null!=n?n:Math.random()*this.container.nativeElement.offsetHeight,this.editor.addState(t,e*this.zoom,n*this.zoom)}},{key:"createConnection",value:function(t){return this.editor.addTransition(t)}},{key:"renderConnection",value:function(t){var e=this;setTimeout((function(){var n=e.findConnection(t);n&&n.getOverlay("transition").setLabel(t.symbols.join(","))}))}},{key:"focus",value:function(t){var e=this;if(this.unfocus(),t){if(t instanceof HTMLElement)t.classList.remove("focused"),t.classList.add("focused"),this.context.state=t.id;else{var n=t.canvas;null==n||n.classList.remove("focused"),null==n||n.classList.add("focused"),this.context.transition=this.editor.findTransition((function(e){return e.fromState===t.sourceId&&e.toState===t.targetId}))}this.actions=this.editorActions.filter((function(t){return t.condition(e.context)}))}}},{key:"unfocus",value:function(){var t,e,n;if(this.context.state){var i=this.findEndpoint(this.context.state);null===(t=null==i?void 0:i.classList)||void 0===t||t.remove("focused")}if(this.context.transition){var o=this.findConnection(this.context.transition);null===(n=null===(e=null==o?void 0:o.canvas)||void 0===e?void 0:e.classList)||void 0===n||n.remove("focused")}this.actions=[],this.context.state=void 0,this.context.transition=void 0}},{key:"onClickContainer",value:function(t){var e=this,n=t.target;n.classList.contains("automaton-state")?this.changeDetector.ignore(this,(function(){return e.focus(n)})):n.isSameNode(this.container.nativeElement)&&this.changeDetector.ignore(this,(function(){return e.unfocus()}))}},{key:"onDblClickContainer",value:function(t){var e=this,n=t.target;n instanceof HTMLElement&&(n.isSameNode(this.container.nativeElement)||n.isSameNode(this.canvas))&&this.changeDetector.ignore(this,(function(){e.createEndpoint(e.editor.stateName(),t.offsetX,t.offsetY)}))}},{key:"onClickConnection",value:function(t){var e=this;this.changeDetector.ignore(this,(function(){e.focus(t)}))}},{key:"onWillCreateConnection",value:function(t){var e=this;return this.changeDetector.ignore(this,(function(){return e.createConnection({fromState:t.connection.sourceId,toState:t.connection.targetId,symbols:["$"]})}))}},{key:"findEndpoint",value:function(t){return this.container.nativeElement.querySelector("#"+t)}},{key:"findConnection",value:function(t){return this.jsp.getAllConnections().find((function(e){return e.sourceId===t.fromState&&e.targetId===t.toState}))}},{key:"setZoom",value:function(t,e){e=e||[.5,.5];var n=this.jsp.getContainer();n.style.overflow="visible",n.style.border="1px solid #F5F5F5";for(var i=["webkit","moz","ms","o"],o="scale("+t+")",a=100*e[0]+"% "+100*e[1]+"%",r=0;r<i.length;r++)n.style[i[r]+"Transform"]=o,n.style[i[r]+"TransformOrigin"]=a;n.style.transform=o,n.style.transformOrigin=a,this.jsp.setZoom(t)}},{key:"canvas",get:function(){return this.container.nativeElement.querySelector(".automaton-editor-canvas")}}]),t}()).\u0275fac=function(t){return new(t||J)(p["\u0275\u0275directiveInject"](p.Injector),p["\u0275\u0275directiveInject"](T),p["\u0275\u0275directiveInject"](E.a),p["\u0275\u0275directiveInject"](w))},J.\u0275cmp=p["\u0275\u0275defineComponent"]({type:J,selectors:[["wc-automaton-editor"]],viewQuery:function(t,e){var n;1&t&&p["\u0275\u0275staticViewQuery"](q,!0),2&t&&p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(e.container=n.first)},inputs:{state:"state"},features:[p["\u0275\u0275ProvidersFeature"]([T,M,L,_,z,A,P,D,R])],decls:13,vars:4,consts:[[1,"automaton-editor-container"],["container",""],[1,"automaton-editor-actions-top"],[4,"ngFor","ngForOf"],[1,"automaton-editor-canvas"],[1,"automaton-editor-actions-bottom"],["mat-icon-button","",3,"click"],[3,"state","stateChange"],["mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(p["\u0275\u0275elementStart"](0,"div",0,1),p["\u0275\u0275elementStart"](2,"div",2),p["\u0275\u0275template"](3,V,3,1,"ng-container",3),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](4,"div",4),p["\u0275\u0275elementStart"](5,"div",5),p["\u0275\u0275elementStart"](6,"button",6),p["\u0275\u0275listener"]("click",(function(t){return e.zoomIn(t)})),p["\u0275\u0275elementStart"](7,"mat-icon"),p["\u0275\u0275text"](8,"zoom_in"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](9,"button",6),p["\u0275\u0275listener"]("click",(function(t){return e.zoomOut(t)})),p["\u0275\u0275elementStart"](10,"mat-icon"),p["\u0275\u0275text"](11,"zoom_out"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](12,"wc-base",7),p["\u0275\u0275listener"]("stateChange",(function(t){return e.state=t})),p["\u0275\u0275elementEnd"]()),2&t&&(p["\u0275\u0275styleProp"]("height",e.state.height+"px"),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngForOf",e.actions),p["\u0275\u0275advance"](9),p["\u0275\u0275property"]("state",e.state))},directives:[F.NgForOf,b.b,g.a,H.a],styles:['@charset "UTF-8";.automaton-editor-container[_ngcontent-%COMP%] {position:relative;display:flex;width:100%;height:500px;overflow:auto;background-color:rgba(27,31,35,.050980392156862744);-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important}.automaton-editor-container[_ngcontent-%COMP%]  .automaton-state{padding:12px;position:absolute;z-index:4;opacity:.8;cursor:move;background-color:#fff;font-size:14px;border:1px solid #2e6f9a;border-radius:50%;box-shadow:2px 2px 19px #e0e0e0;transition:background-color .25s ease-in}.automaton-editor-container[_ngcontent-%COMP%]  .automaton-state.focused, .automaton-editor-container[_ngcontent-%COMP%]  .automaton-state:hover{background-color:#5c96bc;color:#fff}.automaton-editor-container[_ngcontent-%COMP%]  .automaton-state.automaton-state--initial:before{content:"\u2192";font-size:48px;position:absolute;left:-48px;top:50%;transform:translateY(-50%);color:#000}.automaton-editor-container[_ngcontent-%COMP%]  .automaton-state.automaton-state--final:after{content:" ";position:absolute;z-index:-1;top:3px;left:3px;right:3px;bottom:3px;border:3px solid #2e6f9a;border-radius:50%}.automaton-editor-container[_ngcontent-%COMP%]  .automaton-state__label{pointer-events:none}.automaton-editor-container[_ngcontent-%COMP%]  .automaton-state__endpoint{position:absolute;bottom:37%;right:-6px;width:1em;height:1em;background-color:orange;cursor:pointer;border-radius:50%;box-shadow:0 0 2px #000;transition:box-shadow .25s ease-in}.automaton-editor-container[_ngcontent-%COMP%]  .automaton-state__endpoint:hover{box-shadow:0 0 6px #000}.automaton-editor-container[_ngcontent-%COMP%]  .automaton-transition{opacity:.8;padding:.3em;border-radius:.5em;border:1px solid #346789;cursor:pointer;background-color:#fff;transition:background-color .25s ease-in}.automaton-editor-container[_ngcontent-%COMP%]  .automaton-transition.jtk-hover, .automaton-editor-container[_ngcontent-%COMP%]  .jtk-connector.focused+.automaton-transition, .automaton-editor-container[_ngcontent-%COMP%]  .jtk-source-hover, .automaton-editor-container[_ngcontent-%COMP%]  .jtk-target-hover{background-color:#1e8151;color:#fff}.automaton-editor-container[_ngcontent-%COMP%]  .jtk-endpoint{z-index:3}.automaton-editor-container[_ngcontent-%COMP%]  .jtk-connector.focused path{stroke:#1e8151!important;stroke-width:2}.automaton-editor-container[_ngcontent-%COMP%]  .jtk-endpoint, .automaton-editor-container[_ngcontent-%COMP%]  path{cursor:pointer}.automaton-editor-canvas[_ngcontent-%COMP%]{flex:1;position:relative;overflow:auto}.automaton-editor-actions-top[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;z-index:100}.automaton-editor-actions-top[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:4px}.automaton-editor-actions-bottom[_ngcontent-%COMP%]{position:absolute;right:8px;bottom:8px;z-index:100}'],changeDetection:0}),J=Object(C.b)([Object(x.b)(N.a)],J)),Y=((W=function t(){i(this,t),this.customElementComponent=Q}).\u0275mod=p["\u0275\u0275defineNgModule"]({type:W}),W.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||W)},imports:[[S.a,g.b,b.c,y.b,k.b]]}),W)}}])}();