(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{zyCy:function(t,e,n){"use strict";n.r(e),n.d(e,"MatchListModule",(function(){return y}));var i=n("vOrQ"),s=n("Jj1M"),o=n("QXAp"),r=n("D57K"),c=n("A2ki"),a=n("hlYy"),l=n("JS64"),d=n("YPk2"),h=n("0S4P"),u=n("hPIy");const g=["container"];function m(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}const p=function(t){return{$implicit:t}};function f(t,e){if(1&t&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,m,1,0,"ng-container",7),i["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit;i["\u0275\u0275nextContext"]();const n=i["\u0275\u0275reference"](7);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,p,t))}}function C(t,e){1&t&&i["\u0275\u0275elementContainer"](0)}function P(t,e){if(1&t&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,C,1,0,"ng-container",7),i["\u0275\u0275elementContainerEnd"]()),2&t){const t=e.$implicit;i["\u0275\u0275nextContext"]();const n=i["\u0275\u0275reference"](7);i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngTemplateOutlet",n)("ngTemplateOutletContext",i["\u0275\u0275pureFunction1"](2,p,t))}}function v(t,e){if(1&t&&i["\u0275\u0275element"](0,"nge-markdown",8),2&t){const t=e.$implicit;i["\u0275\u0275property"]("id",t.id)("data",t.content)}}let b=(()=>{let t=class{constructor(t,e){this.injector=t,this.changeDetector=e,this.width=0,this.height=0,this.selectedPoints=[]}get sources(){return this.state.nodes.filter(t=>"source"===t.type)}get targets(){return this.state.nodes.filter(t=>"target"===t.type)}ngOnInit(){return Object(r.a)(this,void 0,void 0,(function*(){this.jsPlumb=c.jsPlumb.getInstance({Container:this.container.nativeElement,ConnectionsDetachable:!1,Endpoint:["Dot",{radius:6}],Connector:"StateMachine",PaintStyle:{strokeWidth:4,stroke:"#456"},HoverPaintStyle:{stroke:"#FF4500"},EndpointHoverStyle:{stroke:"#FF4500",fill:"#FF4500"},ConnectionOverlays:[["Arrow",{width:16,length:16,location:.98,id:"arrow"}]],DragOptions:{cursor:"pointer",zIndex:2e3}}),yield new Promise(t=>{this.jsPlumb.ready(()=>{this.addListeners(),t()})})}))}ngAfterViewChecked(){var t;const{offsetWidth:e,offsetHeight:n}=this.container.nativeElement;this.width===e&&this.height===n||0!==this.width&&0!==this.height&&(null===(t=this.jsPlumb)||void 0===t||t.repaintEverything()),this.width=e,this.height=n}ngOnDestroy(){var t;null===(t=this.jsPlumb)||void 0===t||t.reset()}onChangeState(){this.jsPlumb.batch(()=>{this.jsPlumb.reset(!0),this.jsPlumb.setSuspendEvents(this.state.disabled),this.renderEndPoints(),this.renderConnections()})}trackBy(t,e){return e.id||t}renderEndPoints(){this.state.nodes.forEach(t=>{var e;null===(e=this.jsPlumb)||void 0===e||e.addEndpoint(t.id,{id:t.id,isSource:"source"===t.type,isTarget:"target"===t.type,anchor:"source"===t.type?"Right":"Left",maxConnections:this.state.disabled?0:-1})})}renderConnections(){this.state.links.forEach(t=>{var e;t.source&&t.target&&(null===(e=this.jsPlumb)||void 0===e||e.connect({source:t.source,target:t.target,anchors:["RightMiddle","LeftMiddle"],cssClass:t.css}))})}addListeners(){this.jsPlumb.bind("click",t=>{var e;null===(e=this.jsPlumb)||void 0===e||e.deleteConnection(t)}),this.jsPlumb.bind("connection",t=>{this.onCreateConnection(t.connection)}),this.jsPlumb.bind("connectionDetached",t=>{this.onRemoveConnection(t.connection)}),this.jsPlumb.bind("endpointClick",t=>{if(this.selectPoint(t),this.selectedPoints.length>=2){const t=this.selectedPoints.find(t=>t.isSource),e=this.selectedPoints.find(t=>t.isTarget);if(t&&e)this.unselectPoints(),this.state.links.push({source:t.getElement().id,target:e.getElement().id});else{const t=this.selectedPoints[1];this.unselectPoints(),this.selectPoint(t)}}})}selectPoint(t){const e=t.canvas;e.classList.remove("selected"),e.classList.add("selected"),this.selectedPoints.push(t)}unselectPoints(){this.selectedPoints.forEach(t=>{t.canvas.classList.remove("selected")}),this.selectedPoints=[]}indexOfConnection(t){const e=this.state.links;for(let n=0;n<this.state.links.length;n++){const i=e[n];if(i.source===t.sourceId&&i.target===t.targetId)return n}return-1}onCreateConnection(t){-1===this.indexOfConnection(t)&&this.changeDetector.ignore(this,()=>{this.state.links.push({source:t.sourceId,target:t.targetId})})}onRemoveConnection(t){const e=this.indexOfConnection(t);-1!==e&&this.changeDetector.ignore(this,()=>{this.state.links.splice(e,1)})}};return t.\u0275fac=function(e){return new(e||t)(i["\u0275\u0275directiveInject"](i.Injector),i["\u0275\u0275directiveInject"](l.a))},t.\u0275cmp=i["\u0275\u0275defineComponent"]({type:t,selectors:[["wc-match-list"]],viewQuery:function(t,e){var n;1&t&&i["\u0275\u0275staticViewQuery"](g,!0),2&t&&i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(e.container=n.first)},inputs:{state:"state"},decls:9,vars:7,consts:[[1,"match-list-container"],["container",""],[1,"match-list-sources"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"match-list-targets"],["nodeTemplate",""],[3,"state","stateChange"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"id","data"]],template:function(t,e){1&t&&(i["\u0275\u0275elementStart"](0,"div",0,1),i["\u0275\u0275elementStart"](2,"div",2),i["\u0275\u0275template"](3,f,2,4,"ng-container",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](4,"div",4),i["\u0275\u0275template"](5,P,2,4,"ng-container",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275template"](6,v,1,2,"ng-template",null,5,i["\u0275\u0275templateRefExtractor"]),i["\u0275\u0275elementStart"](8,"wc-base",6),i["\u0275\u0275listener"]("stateChange",(function(t){return e.state=t})),i["\u0275\u0275elementEnd"]()),2&t&&(i["\u0275\u0275classProp"]("disabled",e.state.disabled),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngForOf",e.sources)("ngForTrackBy",e.trackBy),i["\u0275\u0275advance"](2),i["\u0275\u0275property"]("ngForOf",e.targets)("ngForTrackBy",e.trackBy),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("state",e.state))},directives:[h.NgForOf,u.a,h.NgTemplateOutlet,s.NgeMarkdownComponent],styles:[".match-list-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;grid-gap:8rem;align-items:center;position:relative;min-height:100px}.match-list-container.disabled[_ngcontent-%COMP%]{cursor:not-allowed;border:1px dashed #ccc}.match-list-container[_ngcontent-%COMP%]  .jtk-endpoint svg, .match-list-container[_ngcontent-%COMP%]  svg.jtk-connector{cursor:pointer}.match-list-container[_ngcontent-%COMP%]  .jtk-endpoint.selected circle{fill:#ff4500;stroke:#ff4500}.match-list-container[_ngcontent-%COMP%]  svg.error-state, .match-list-container[_ngcontent-%COMP%]  svg.success-state, .match-list-container[_ngcontent-%COMP%]  svg.warning-state{background-color:unset!important;border:unset!important;border-radius:unset!important}.match-list-container[_ngcontent-%COMP%]  svg.error-state path{stroke:red}.match-list-container[_ngcontent-%COMP%]  svg.warning-state path{stroke:#ff0}.match-list-container[_ngcontent-%COMP%]  svg.success-state path{stroke:#0f0}.match-list-sources[_ngcontent-%COMP%]{text-align:end}.match-list-targets[_ngcontent-%COMP%]{text-align:start}nge-markdown[_ngcontent-%COMP%]{display:block;padding:1rem;border-bottom:1px solid #f5f5f5}nge-markdown[_ngcontent-%COMP%]  img{width:128px;-o-object-fit:cover;object-fit:cover;height:auto}"],changeDetection:0}),t=Object(r.b)([Object(a.b)(d.a)],t),t})(),y=(()=>{class t{constructor(){this.customElementComponent=b}}return t.\u0275mod=i["\u0275\u0275defineNgModule"]({type:t}),t.\u0275inj=i["\u0275\u0275defineInjector"]({factory:function(e){return new(e||t)},imports:[[o.a,s.NgeMarkdownModule]]}),t})()}}]);