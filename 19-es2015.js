(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"+S1+":function(e,t,n){"use strict";n.r(t),n.d(t,"TextSelectModule",(function(){return h}));var s=n("vOrQ"),r=n("hvDT"),i=n("D57K"),o=n("wgwC"),c=n("Dy3e"),u=n("czpK");const a=["*"],l="data-select-index";let d=(()=>{let e=class{constructor(e,t){this.injector=e,this.el=t}get container(){const e=this.el.nativeElement;let t=e.firstElementChild;return"DIV"!==t.tagName&&(t=document.createElement("div"),e.insertBefore(t,e.firstElementChild)),t.className="cursor-pointer","free"===this.state.mode&&(t.className="cursor-text"),t}onSetState(){switch(this.state.mode){case"units":this.renderModeUnits();break;case"free":this.renderModeFree();break;default:this.renderModeRegex()}this.highlightSelections()}onMouseUp(e){"free"===this.state.mode?this.createSelectionFromMouse():this.createSelectionFromEvent(e)}createSelectionFromMouse(){var e,t;const n=(window.getSelection||document.getSelection)(),s=null===(e=null==n?void 0:n.anchorNode)||void 0===e?void 0:e.parentElement,r=null===(t=null==n?void 0:n.focusNode)||void 0===t?void 0:t.parentElement,i=Number.parseInt((null==s?void 0:s.getAttribute(l))||"",10),o=Number.parseInt((null==r?void 0:r.getAttribute(l))||"",10);if(Number.isNaN(i)||Number.isNaN(o))return;const c=Math.min(i,o),u=Math.max(i,o),a=this.state.selections;for(let l=0;l<a.length;l++){const e=a[l];if("object"==typeof e.position){const t=e.position,n=u>=t[0]&&c<=t[1];if(c>=t[0]&&c<=t[1]||n)return void a.splice(l,1)}}this.state.selections.push({position:[c,u]})}createSelectionFromEvent(e){if(!(e.target instanceof HTMLElement))return;const t=this.container;let n=e.target;if(t.isSameNode(n)||!t.contains(n))return;for(;null==n.getAttribute(l);){if(n=n.parentElement,null==n)return;if(n.isSameNode(t))return}const s=Number.parseInt(n.getAttribute(l)||"",10);if(!Number.isNaN(s)){let e=0;for(const t of this.state.selections){if(t.position===s)return void this.state.selections.splice(e,1);e++}this.state.selections.push({position:s})}}renderModeFree(){this.container.innerHTML=this.state.text.trim();let e=0;const t=n=>{var s;if(n.nodeType!==Node.TEXT_NODE)Array.from(n.childNodes).forEach(e=>t(e));else{const t=document.createElement("span");for(const s of n.textContent){if("\n"===s)continue;const n=document.createElement("span");n.innerText=s,n.setAttribute(l,(e++).toString()),t.appendChild(n)}null===(s=n.parentElement)||void 0===s||s.replaceChild(t,n)}};t(this.container)}renderModeUnits(){let e=0;this.container.innerHTML=this.state.text.replace(/\{([^}]+?)\}/gm,(t,n)=>`<span ${l}="${e++}">${n}</span>`)}renderModeRegex(){let e=0;this.container.innerHTML=this.state.text.trim().replace(new RegExp(this.state.regex||"","gm"),t=>`<span ${l}="${e++}">${t}</span>`)}highlightRange(e,t){const n=this.container,s=[];for(let r=e;r<=t;r++){const e=n.querySelector(`[${l}="${r}"]`);e&&(e.className="highlight-state",s.push(e.innerHTML))}return s.join("")}highlightSelections(){const e=this.container;e.querySelectorAll(`[${l}]`).forEach(e=>{e.className=""}),this.state.selections.forEach(t=>{if("number"==typeof t.position){const n=e.querySelector(`[${l}="${t.position}"]`);n&&(n.className="highlight-state",t.content!==n.textContent&&(t.content=n.textContent))}else{const e=this.highlightRange(t.position[0],t.position[1]);t.content!==e&&(t.content=e)}})}};return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](s.Injector),s["\u0275\u0275directiveInject"](s.ElementRef))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["wc-text-select"]],hostBindings:function(e,t){1&e&&s["\u0275\u0275listener"]("mouseup",(function(e){return t.onMouseUp(e)}))},inputs:{state:"state"},ngContentSelectors:a,decls:2,vars:1,consts:[[3,"state","stateChange"]],template:function(e,t){1&e&&(s["\u0275\u0275projectionDef"](),s["\u0275\u0275elementStart"](0,"wc-base",0),s["\u0275\u0275listener"]("stateChange",(function(e){return t.state=e})),s["\u0275\u0275projection"](1),s["\u0275\u0275elementEnd"]()),2&e&&s["\u0275\u0275property"]("state",t.state)},directives:[u.a],styles:["[_nghost-%COMP%]  .cursor-pointer{cursor:pointer}[_nghost-%COMP%]  .cursor-text{cursor:text}[_nghost-%COMP%]  .highlight-state{color:#004085;background-color:#cce5ff;border-bottom:1px solid #b8daff;border-color:#b8daff transparent;border-top:1px solid #b8daff}"],changeDetection:0}),e=Object(i.b)([Object(o.b)(c.a)],e),e})(),h=(()=>{class e{constructor(){this.customElementComponent=d}}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.a]]}),e})()},TKFd:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l}));var s=n("5XID"),r=n("vOrQ"),i=n("Vgaj"),o=n("mWib");let c=(()=>{class e{create(e){return"undefined"==typeof MutationObserver?null:new MutationObserver(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=Object(r["\u0275\u0275defineInjectable"])({factory:function(){return new e},token:e,providedIn:"root"}),e})(),u=(()=>{class e{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,t)=>this._cleanupObserver(t))}observe(e){const t=Object(s.d)(e);return new i.Observable(e=>{const n=this._observeElement(t).subscribe(e);return()=>{n.unsubscribe(),this._unobserveElement(t)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{const t=new i.Subject,n=this._mutationObserverFactory.create(e=>t.next(e));n&&n.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:n,stream:t,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){const{observer:t,stream:n}=this._observedElements.get(e);t&&t.disconnect(),n.complete(),this._observedElements.delete(e)}}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](c))},e.\u0275prov=Object(r["\u0275\u0275defineInjectable"])({factory:function(){return new e(Object(r["\u0275\u0275inject"])(c))},token:e,providedIn:"root"}),e})(),a=(()=>{class e{constructor(e,t,n){this._contentObserver=e,this._elementRef=t,this._ngZone=n,this.event=new r.EventEmitter,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Object(s.b)(e),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Object(s.e)(e),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(Object(o.a)(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription&&this._currentSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](u),r["\u0275\u0275directiveInject"](r.ElementRef),r["\u0275\u0275directiveInject"](r.NgZone))},e.\u0275dir=r["\u0275\u0275defineDirective"]({type:e,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),e})(),l=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},providers:[c]}),e})()}}]);