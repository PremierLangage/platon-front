!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{"3/xl":function(t,r,a){"use strict";a.r(r),a.d(r,"SettingsModule",function(){return Q});var o=a("0S4P"),s=a("JAnZ"),c=a("3xDq"),l=a("e6WT"),m=a("Dxy4"),u=a("ZFy/"),d=a("Q2Ze"),p=a("66zS"),f=a("1+nf"),h=a("3ZFI"),b=a("N2O2"),g=a("SHEi"),v=a("0xS5"),y=a("yF8b"),x=a("A9uA"),S=a("mrSG"),z=a("vOrQ"),C=a("cIEA"),k=a("pcbr"),w=a("8sFK");function E(e,t){if(1&e){var n=z["\u0275\u0275getCurrentView"]();z["\u0275\u0275elementContainerStart"](0),z["\u0275\u0275elementStart"](1,"form",1),z["\u0275\u0275listener"]("ngSubmit",function(){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275nextContext"]().saveChanges()}),z["\u0275\u0275elementStart"](2,"mat-form-field",2),z["\u0275\u0275elementStart"](3,"mat-label"),z["\u0275\u0275text"](4,"Nom"),z["\u0275\u0275elementEnd"](),z["\u0275\u0275element"](5,"input",3),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](6,"mat-form-field",2),z["\u0275\u0275elementStart"](7,"mat-label"),z["\u0275\u0275text"](8,"Description"),z["\u0275\u0275elementEnd"](),z["\u0275\u0275element"](9,"textarea",4),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](10,"mat-label",5),z["\u0275\u0275text"](11,"Tags"),z["\u0275\u0275elementEnd"](),z["\u0275\u0275element"](12,"nz-cascader",6),z["\u0275\u0275elementStart"](13,"button",7),z["\u0275\u0275text"](14," Sauvegarder "),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementContainerEnd"]()}if(2&e){var r=z["\u0275\u0275nextContext"]();z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("formGroup",r.form),z["\u0275\u0275advance"](11),z["\u0275\u0275property"]("nzOptions",r.tags)("nzNotFoundContent","Aucun tag ne correspond \xe0 votre recherche")("nzPlaceHolder","Choisissez une liste de tags...")("nzSize","large")("nzShowSearch",!0),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("disabled",!r.context.user.isAdmin||!r.form.valid)}}var O,A=((O=function(){function e(t,r,i){n(this,e),this.tagsService=t,this.detailService=r,this.changeDetector=i,this.subscription=[],this.context={state:"LOADING",events:[],members:[]},this.form=new c.FormGroup({name:new c.FormControl("",[c.Validators.required]),tags:new c.FormControl("",c.Validators.required),description:new c.FormControl("",[c.Validators.required])}),this.tags=[]}return i(e,[{key:"ngOnInit",value:function(){return Object(S.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.subscription.push(this.detailService.context.subscribe(function(e){t.context=e,"READY"===e.state&&(t.form.setValue({name:e.resource.name,tags:e.resource.tags.slice(),description:e.resource.description}),setTimeout(function(){t.changeDetector.markForCheck()}))})),e.next=3,this.tagsService.cascader().toPromise();case 3:this.tags=e.sent,this.changeDetector.markForCheck();case 5:case"end":return e.stop()}},e,this)}))}},{key:"ngOnDestroy",value:function(){this.subscription.forEach(function(e){return e.unsubscribe()})}},{key:"saveChanges",value:function(){var e=Object(C.g)(this.context.resource),t=this.form.value,n=t.name,r=t.description,i=t.tags;e.name=n,e.description=r,e.tags=i,this.detailService.update(e)}}]),e}()).\u0275fac=function(e){return new(e||O)(z["\u0275\u0275directiveInject"](x.c),z["\u0275\u0275directiveInject"](k.a),z["\u0275\u0275directiveInject"](z.ChangeDetectorRef))},O.\u0275cmp=z["\u0275\u0275defineComponent"]({type:O,selectors:[["app-ws-detail-settings-general"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],["appearance","fill",2,"display","block"],["formControlName","name","matInput",""],["cdkTextareaAutosize","","formControlName","description","matInput",""],["id","label-tags"],["aria-labelledby","label-tags","formControlName","tags",3,"nzOptions","nzNotFoundContent","nzPlaceHolder","nzSize","nzShowSearch"],["type","submit","mat-raised-button","","color","primary",3,"disabled"]],template:function(e,t){1&e&&z["\u0275\u0275template"](0,E,15,7,"ng-container",0),2&e&&z["\u0275\u0275property"]("ngIf","READY"===t.context.state)},directives:[o.NgIf,c["\u0275angular_packages_forms_forms_y"],c.NgControlStatusGroup,c.FormGroupDirective,d.c,d.g,c.DefaultValueAccessor,l.a,c.NgControlStatus,c.FormControlName,w.b,h.a,m.b],styles:["[_nghost-%COMP%]{display:block;max-width:720px;padding:0 12px}nz-cascader[_ngcontent-%COMP%]{display:block;width:100%;margin:12px 0}"],changeDetection:0}),O),I=function(){return["general"]};function N(e,t){1&e&&(z["\u0275\u0275elementStart"](0,"a",3),z["\u0275\u0275text"](1,"G\xe9n\xe9rale"),z["\u0275\u0275elementEnd"]()),2&e&&z["\u0275\u0275property"]("routerLink",z["\u0275\u0275pureFunction0"](1,I))}function T(e,t){1&e&&z["\u0275\u0275element"](0,"router-outlet")}var D=function(){return["members"]};function F(e,t){1&e&&(z["\u0275\u0275elementStart"](0,"a",3),z["\u0275\u0275text"](1,"Membres"),z["\u0275\u0275elementEnd"]()),2&e&&z["\u0275\u0275property"]("routerLink",z["\u0275\u0275pureFunction0"](1,D))}function P(e,t){1&e&&z["\u0275\u0275element"](0,"router-outlet")}var M,L=((M=function(){function e(t){n(this,e),this.detailService=t,this.subscriptions=[],this.context={state:"LOADING",events:[],members:[]}}return i(e,[{key:"ngOnInit",value:function(){var e=this;this.subscriptions.push(this.detailService.context.subscribe(function(t){e.context=t}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}}]),e}()).\u0275fac=function(e){return new(e||M)(z["\u0275\u0275directiveInject"](k.a))},M.\u0275cmp=z["\u0275\u0275defineComponent"]({type:M,selectors:[["app-ws-detail-settings"]],decls:7,vars:1,consts:[["nzLinkRouter","",3,"nzTabPosition"],["nz-tab-link","",3,"routerLink",4,"nzTabLink"],["nz-tab",""],["nz-tab-link","",3,"routerLink"]],template:function(e,t){1&e&&(z["\u0275\u0275elementStart"](0,"nz-tabset",0),z["\u0275\u0275elementStart"](1,"nz-tab"),z["\u0275\u0275template"](2,N,2,2,"a",1),z["\u0275\u0275template"](3,T,1,0,"ng-template",2),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](4,"nz-tab"),z["\u0275\u0275template"](5,F,2,2,"a",1),z["\u0275\u0275template"](6,P,1,0,"ng-template",2),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"]()),2&e&&z["\u0275\u0275property"]("nzTabPosition","left")},directives:[f.e,f.a,f.d,f.b,f.c,s.RouterLinkWithHref,s.RouterOutlet],styles:["[_nghost-%COMP%]  .ant-tabs-tabpane{padding:12px}"],changeDetection:0}),M),R=a("olp5"),j=a("LAyA"),V=a("oDeN"),_=a("ztHp");function G(e,t){if(1&e){var n=z["\u0275\u0275getCurrentView"]();z["\u0275\u0275elementStart"](0,"button",16),z["\u0275\u0275listener"]("nzOnConfirm",function(){z["\u0275\u0275restoreView"](n);var e=z["\u0275\u0275nextContext"]().item;return z["\u0275\u0275nextContext"]().remove(e)}),z["\u0275\u0275element"](1,"i",17),z["\u0275\u0275elementEnd"]()}if(2&e){var r=z["\u0275\u0275nextContext"]().item;z["\u0275\u0275property"]("nzPopconfirmTitle","Voulez-vous vraiment retirer \u201c"+r.userName+"\u201d des membres du cercle?")}}var H=function(e){return["/profile",e]};function q(e,t){if(1&e&&(z["\u0275\u0275elementStart"](0,"div",12),z["\u0275\u0275elementStart"](1,"a",13),z["\u0275\u0275element"](2,"auth-avatar",14),z["\u0275\u0275elementEnd"](),z["\u0275\u0275element"](3,"div",6),z["\u0275\u0275template"](4,G,2,1,"button",15),z["\u0275\u0275elementEnd"]()),2&e){var n=t.item,r=z["\u0275\u0275nextContext"]();z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("routerLink",z["\u0275\u0275pureFunction1"](3,H,n.id)),z["\u0275\u0275advance"](1),z["\u0275\u0275property"]("user",n),z["\u0275\u0275advance"](2),z["\u0275\u0275property"]("ngIf",r.context.user.isAdmin&&!n.isAdmin)}}var Z,B,J=function(){return["userName","lastName","firstName"]},W=((B=function(){function t(e,r){n(this,t),this.detailService=e,this.changeDetector=r,this.subscriptions=[],this.hostClass="mat-elevation-z2",this.context={state:"LOADING",events:[],members:[]},this.loading=!1}return i(t,[{key:"ngOnInit",value:function(){var e=this;this.subscriptions.push(this.detailService.context.subscribe(function(t){e.context=t,e.changeDetector.markForCheck()}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"add",value:function(t){var n,r=-1,i=this.context.resource;switch(i.type){case"CIRCLE":r=i.id;break;default:r=i.circle.id}(n=this.detailService).addMembers.apply(n,e(t.map(function(e){return{id:e.id,picture:e.picture,userName:e.userName,lastName:e.lastName,firstName:e.firstName,isAdmin:e.isAdmin,circleId:r}})))}},{key:"remove",value:function(e){this.detailService.removeMembers(e)}}]),t}()).\u0275fac=function(e){return new(e||B)(z["\u0275\u0275directiveInject"](k.a),z["\u0275\u0275directiveInject"](z.ChangeDetectorRef))},B.\u0275cmp=z["\u0275\u0275defineComponent"]({type:B,selectors:[["app-ws-detail-settings-members"]],hostVars:2,hostBindings:function(e,t){2&e&&z["\u0275\u0275classMap"](t.hostClass)},decls:16,vars:9,consts:[[3,"nzActive","nzLoading"],[1,"members-list-header"],["appearance","fill"],["matPrefix","","nz-icon","","nzType","search","nzTheme","outline"],["matInput",""],["input",""],[1,"spacer"],["mat-raised-button","","color","primary",3,"disabled","click"],[3,"items","idField","filterBy","filter"],["slot","row"],["searchTitle","Inscrire un membre","searchOkTitle","Inscrire","searchNoTitle","Annuler","searchRole","Teacher",3,"searchExcludes","didSelect"],["search",""],[1,"members-list-item"],["mat-button","",3,"routerLink"],[3,"user"],["nz-popconfirm","","nzOkText","Retirer","nzCancelText","Annuler","nzOkType","danger","nzPopconfirmPlacement","top","mat-icon-button","",3,"nzPopconfirmTitle","nzOnConfirm",4,"ngIf"],["nz-popconfirm","","nzOkText","Retirer","nzCancelText","Annuler","nzOkType","danger","nzPopconfirmPlacement","top","mat-icon-button","",3,"nzPopconfirmTitle","nzOnConfirm"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,t){if(1&e){var n=z["\u0275\u0275getCurrentView"]();z["\u0275\u0275elementStart"](0,"nz-skeleton",0),z["\u0275\u0275elementStart"](1,"div",1),z["\u0275\u0275elementStart"](2,"mat-form-field",2),z["\u0275\u0275element"](3,"i",3),z["\u0275\u0275elementStart"](4,"mat-label"),z["\u0275\u0275text"](5,"Rechercher des membres"),z["\u0275\u0275elementEnd"](),z["\u0275\u0275element"](6,"input",4,5),z["\u0275\u0275elementEnd"](),z["\u0275\u0275element"](8,"div",6),z["\u0275\u0275elementStart"](9,"button",7),z["\u0275\u0275listener"]("click",function(){return z["\u0275\u0275restoreView"](n),z["\u0275\u0275reference"](15).open()}),z["\u0275\u0275text"](10," Inscrire un membre "),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](11,"ui-list",8),z["\u0275\u0275elementStart"](12,"ui-list-template",9),z["\u0275\u0275template"](13,q,5,5,"ng-template"),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementEnd"](),z["\u0275\u0275elementStart"](14,"auth-search-modal",10,11),z["\u0275\u0275listener"]("didSelect",function(e){return t.add(e)}),z["\u0275\u0275elementEnd"]()}if(2&e){var r=z["\u0275\u0275reference"](7);z["\u0275\u0275property"]("nzActive",!0)("nzLoading",t.loading),z["\u0275\u0275advance"](9),z["\u0275\u0275property"]("disabled",!t.context.user.isAdmin),z["\u0275\u0275advance"](2),z["\u0275\u0275property"]("items",t.context.members)("idField","id")("filterBy",z["\u0275\u0275pureFunction0"](8,J))("filter",r.value),z["\u0275\u0275advance"](3),z["\u0275\u0275property"]("searchExcludes",t.context.members)}},directives:[b.a,d.c,d.h,p.a,d.g,l.a,m.b,R.a,j.a,V.a,m.a,s.RouterLinkWithHref,_.a,o.NgIf,g.a],styles:["[_nghost-%COMP%]{display:block;max-width:720px;padding:0 12px}.members-list-header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 0}.members-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;height:64px;border-bottom:1px solid var(--brand-border-color)}.spacer[_ngcontent-%COMP%]{flex:1}"],changeDetection:0}),B),Q=((Z=function e(){n(this,e)}).\u0275mod=z["\u0275\u0275defineNgModule"]({type:Z}),Z.\u0275inj=z["\u0275\u0275defineInjector"]({factory:function(e){return new(e||Z)},providers:[],imports:[[o.CommonModule,c.FormsModule,c.ReactiveFormsModule,l.b,m.c,u.b,d.e,p.b,f.f,h.b,b.b,g.b,v.e,y.a,x.a,s.RouterModule.forChild([{path:"",component:L,children:[{path:"general",component:A},{path:"members",component:W},{path:"",redirectTo:"general"}]}])]]}),Z)}}])}();