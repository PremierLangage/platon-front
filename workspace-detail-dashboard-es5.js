!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{deWh:function(t,r,a){"use strict";a.r(r),a.d(r,"DashboardModule",function(){return q});var o=a("0S4P"),i=a("JAnZ"),s=a("Dxy4"),l=a("ZTz/"),c=a("Q2Ze"),p=a("o4Yh"),m=a("XFzh"),u=a("0xS5"),d=a("A9uA"),f=a("vOrQ"),v=a("3xDq"),g=a("cIEA"),h=a("/uUt"),y=a("pcbr"),C=a("p+Sl"),E=a("mW00"),x=a("pk7b");function b(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"nz-timeline-item"),f["\u0275\u0275element"](2,"div",3),f["\u0275\u0275pipe"](3,"safe"),f["\u0275\u0275text"](4),f["\u0275\u0275pipe"](5,"date"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("innerHTML",f["\u0275\u0275pipeBind2"](3,2,n.text,"html"),f["\u0275\u0275sanitizeHtml"]),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"](" - ",f["\u0275\u0275pipeBind2"](5,5,1e3*n.date,"dd/MM/yyyy \xe0 HH:mm")," ")}}function S(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"h3"),f["\u0275\u0275text"](2,"\xc9v\xe9nements r\xe9cents"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](3,"nz-timeline"),f["\u0275\u0275template"](4,b,6,8,"ng-container",2),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("ngForOf",n.events)("ngForTrackBy",n.trackById)}}function k(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"h2"),f["\u0275\u0275text"](1,"Aucun \xe9v\xe9nement important n'est \xe0 signaler !"),f["\u0275\u0275elementEnd"]())}function F(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"nz-empty",4),f["\u0275\u0275template"](1,k,2,0,"ng-template",null,5,f["\u0275\u0275templateRefExtractor"]),f["\u0275\u0275elementEnd"]()),2&e){var n=f["\u0275\u0275reference"](2);f["\u0275\u0275property"]("nzNotFoundContent",n)}}var O,I=((O=function(){function t(){e(this,t),this.events=[]}return n(t,[{key:"ngOnChanges",value:function(){this.events&&(this.events=this.events.sort(function(e,t){return t.date-e.date}))}},{key:"trackById",value:function(e,t){return t.id}}]),t}()).\u0275fac=function(e){return new(e||O)},O.\u0275cmp=f["\u0275\u0275defineComponent"]({type:O,selectors:[["ws-resource-events"]],inputs:{events:"events"},features:[f["\u0275\u0275NgOnChangesFeature"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noevent",""],[4,"ngFor","ngForOf","ngForTrackBy"],[2,"display","inline-block",3,"innerHTML"],[3,"nzNotFoundContent"],["content",""]],template:function(e,t){if(1&e&&(f["\u0275\u0275template"](0,S,5,2,"ng-container",0),f["\u0275\u0275template"](1,F,3,1,"ng-template",null,1,f["\u0275\u0275templateRefExtractor"])),2&e){var n=f["\u0275\u0275reference"](2);f["\u0275\u0275property"]("ngIf",t.events.length)("ngIfElse",n)}},directives:[o.NgIf,C.a,o.NgForOf,C.b,E.b],pipes:[x.a,o.DatePipe],styles:[""],changeDetection:0}),O),M=a("UhP/"),w=a("ztHp"),D=a("mhHy");function P(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"mat-option",7),f["\u0275\u0275text"](1),f["\u0275\u0275pipe"](2,"resourceStatus"),f["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;f["\u0275\u0275property"]("value",n),f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate1"](" ",f["\u0275\u0275pipeBind2"](2,2,n,"label")," ")}}function B(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-form-field",4),f["\u0275\u0275elementStart"](2,"mat-label"),f["\u0275\u0275text"](3,"Status"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"mat-select",5),f["\u0275\u0275template"](5,P,3,5,"mat-option",6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](4),f["\u0275\u0275property"]("formControl",n.statusControl),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngForOf",n.status)}}var T=function(e,t){return{circle:e,status:t,types:"EXERCISE|ACTIVITY"}};function z(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"a",9),f["\u0275\u0275elementStart"](2,"nz-tag",10),f["\u0275\u0275pipe"](3,"resourceStatus"),f["\u0275\u0275text"](4),f["\u0275\u0275pipe"](5,"resourceStatus"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit,r=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("queryParams",f["\u0275\u0275pureFunction2"](10,T,r.context.resource.id,n))("queryParamsHandling","merge"),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("nzColor",f["\u0275\u0275pipeBind2"](3,4,n,"color")),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"](" ",f["\u0275\u0275pipeBind2"](5,7,n,"label")," 0 ")}}function A(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"mat-expansion-panel",2),f["\u0275\u0275elementStart"](2,"mat-expansion-panel-header"),f["\u0275\u0275elementStart"](3,"span"),f["\u0275\u0275text"](4,"Status des ressources"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](5,z,6,13,"ng-container",8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){var n=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("ngForOf",n.status)}}var R=function(e){return["/profile",e]};function L(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"a",11),f["\u0275\u0275element"](2,"auth-avatar",12),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("routerLink",f["\u0275\u0275pureFunction1"](2,R,n.id)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("user",n)}}function N(e,t){if(1&e&&(f["\u0275\u0275elementContainerStart"](0),f["\u0275\u0275elementStart"](1,"a",11),f["\u0275\u0275element"](2,"auth-avatar",12),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementContainerEnd"]()),2&e){var n=t.$implicit;f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("routerLink",f["\u0275\u0275pureFunction1"](2,R,n.id)),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("user",n)}}var _,H,j=((H=function(){function t(n,r){e(this,t),this.detailService=n,this.changeDetector=r,this.subscriptions=[],this.status=["DRAFT","READY","BUGGED","NOT_TESTED","DEPRECATED"],this.statusControl=new v.FormControl("",[v.Validators.required]),this.context={state:"LOADING",events:[],members:[]},this.admins=[],this.members=[]}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.subscriptions.push(this.detailService.context.subscribe(function(t){var n;e.context=t,e.statusControl.enable(),e.context.isAdmin||e.statusControl.disable(),"READY"===t.state&&"CIRCLE"!==(null===(n=t.resource)||void 0===n?void 0:n.type)&&e.statusControl.patchValue(t.resource.status),e.admins=[],e.members=[],t.members.forEach(function(t){t.isAdmin?e.admins.push(t):e.members.push(t)}),e.changeDetector.markForCheck()})),this.subscriptions.push(this.statusControl.valueChanges.pipe(Object(h.a)()).subscribe(function(t){var n=Object(g.h)(e.context.resource);t!==n.status&&(n.status=t,e.detailService.update(n))}))}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"trackById",value:function(e,t){return t.id}}]),t}()).\u0275fac=function(e){return new(e||H)(f["\u0275\u0275directiveInject"](y.a),f["\u0275\u0275directiveInject"](f.ChangeDetectorRef))},H.\u0275cmp=f["\u0275\u0275defineComponent"]({type:H,selectors:[["app-circle-dashboard"]],decls:15,vars:7,consts:[[3,"events"],[4,"ngIf"],["expanded","true"],[4,"ngFor","ngForOf","ngForTrackBy"],["appearance","fill"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[4,"ngFor","ngForOf"],["routerLink","['/workspace/search']",1,"status-item",3,"queryParams","queryParamsHandling"],[3,"nzColor"],["mat-button","",1,"link-profile",3,"routerLink"],[3,"user"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"section"),f["\u0275\u0275element"](1,"ws-resource-events",0),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](2,"aside"),f["\u0275\u0275template"](3,B,6,2,"ng-container",1),f["\u0275\u0275template"](4,A,6,1,"ng-container",1),f["\u0275\u0275elementStart"](5,"mat-expansion-panel",2),f["\u0275\u0275elementStart"](6,"mat-expansion-panel-header"),f["\u0275\u0275elementStart"](7,"span"),f["\u0275\u0275text"](8,"Administrateurs"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](9,L,3,4,"ng-container",3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](10,"mat-expansion-panel",2),f["\u0275\u0275elementStart"](11,"mat-expansion-panel-header"),f["\u0275\u0275elementStart"](12,"span"),f["\u0275\u0275text"](13,"Membres"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](14,N,3,4,"ng-container",3),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("events",t.context.events),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("ngIf","CIRCLE"!==t.context.resource.type),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf","CIRCLE"===t.context.resource.type),f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("ngForOf",t.admins)("ngForTrackBy",t.trackById),f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("ngForOf",t.members)("ngForTrackBy",t.trackById))},directives:[I,o.NgIf,p.b,p.c,o.NgForOf,c.c,c.g,l.a,v.NgControlStatus,v.FormControlDirective,M.f,i.RouterLinkWithHref,m.a,s.a,w.a],pipes:[D.a],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:6fr 2fr;-moz-column-gap:12px;column-gap:12px}mat-form-field[_ngcontent-%COMP%]{width:100%}.status-item[_ngcontent-%COMP%], mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:8px}.status-item[_ngcontent-%COMP%]{cursor:pointer;display:block;width:100%}.status-item[_ngcontent-%COMP%]   nz-tag[_ngcontent-%COMP%]{width:100%}.link-profile[_ngcontent-%COMP%]{display:inline-block;margin-bottom:8px}.mat-expansion-panel-body[_ngcontent-%COMP%]{padding:0 24px 12px}.spacer[_ngcontent-%COMP%]{flex:1}"],changeDetection:0}),H),q=((_=function t(){e(this,t)}).\u0275mod=f["\u0275\u0275defineNgModule"]({type:_}),_.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||_)},providers:[],imports:[[o.CommonModule,v.ReactiveFormsModule,i.RouterModule.forChild([{path:"",component:j}]),s.c,l.b,c.e,p.a,m.b,u.e,d.a]]}),_)}}])}();